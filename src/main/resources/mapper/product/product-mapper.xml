<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="productMapper">
	
	<!-- 물품기부 신청 -->
	<insert id="insertProduct" parameterType="product">
		INSERT INTO DONATE_PRODUCT(
		PRODUCT_NO, PRODUCT_TYPE, PUSER_NAME,
		BUSINESS_NAME, PHONE, EMAIL, PRODUCT_WAY, PRODUCT_AMOUNT, RECEIPT, 
		BUSINESS_NUM, RESIDENT_NUM, STATUS,PRODUCT_DATE, CATEGORY_NO, INQUIRY_CONTENT, RECEIVE_DELIVERY
		)
		VALUES(
		SEQ_DOPRONO.NEXTVAL, #{productType}, #{puserName}, #{businessName}, #{phone}, #{email}, #{productWay},
		#{productAmount}, #{receipt}, #{businessNum}, #{residentNum}, 'Y', SYSDATE, #{categoryNo}, #{inquiryContent}, 'N'
		)
	</insert>
	
	<select id="selectProductNo" resultType="int">
		SELECT PRODUCT_NO
		FROM (
		    SELECT PRODUCT_NO
		    FROM DONATE_PRODUCT
		    ORDER BY PRODUCT_NO DESC
		)
		WHERE ROWNUM = 1
	</select>
	
	
	<select id="selectProductNoCheck" resultType="product">
		SELECT 
			PRODUCT_NO, PRODUCT_TYPE, PUSER_NAME,
			BUSINESS_NAME, PHONE, EMAIL, PRODUCT_WAY, PRODUCT_AMOUNT, RECEIPT, 
			BUSINESS_NUM, RESIDENT_NUM, STATUS,PRODUCT_DATE, CATEGORY_NO, INQUIRY_CONTENT, RECEIVE_DELIVERY
		FROM DONATE_PRODUCT
		WHERE PHONE = #{phone}
	</select>

	
</mapper>